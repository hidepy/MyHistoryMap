<html ng-app="app">
<head>

  <meta charset="utf-8">
    
  <title>my history map</title>

  <link rel="stylesheet" type="text/css" href="bootstrap3/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/my_history_map.css">

  <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAC5TnApJHV0fXpLJ7NyEsrKevtWEefP_M&sensor=false"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="js/MapPointData.js"></script>
  <script type="text/javascript" src="js/my_history_manager.js"></script>

  <script src="lib/angular/angular.js"></script>
  <script src="lib/angular/checklist-model.js"></script>
  <script src="js/app.js"></script>

  <link rel="stylesheet" type="text/css" href="lib/lightbox/css/lightbox.css">

  <style>
  #history_map{
    opacity: 0.1;
  }
  .main_img{
    opacity: 0.05;
  }
  .panel_img{
    opacity: 0.05;
  }
  .thumb_img{
    opacity: 0.05;
  }
  </style>

</head> 

<body ng-controller="AppController">

  <nav id="top_navigation" class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">mhm</a>
      </div>
      <div id="navbar" class="navbar-collapse collapse">
        <form class="navbar-form navbar-right">
          <div class="form-group">
            <input type="text" placeholder="Email" class="form-control">
          </div>
          <div class="form-group">
            <input type="password" placeholder="Password" class="form-control">
          </div>
          <button type="submit" class="btn btn-success">Sign in</button>
        </form>
      </div><!--/.navbar-collapse -->
    </div>
  </nav>

  <!-- Main jumbotron for a primary marketing message or call to action -->
  <div id="header" class="jumbotron">
    <div class="container">
      <h1>My History Map</h1>
      <p>色々な所を旅してきましたね。<br>でも、なかなかパッと何処にいったか思い出せません。<br>
      そこで！このツールに保存しておきましょう</p>
      <button class="btn" ng-click="pushStart()">Start</button>
    </div>
  </div>

  <div id="contents">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div id="history_map"></div>
        </div>

        <div id="detail" class="col-md-8">
          <div class="img_box clearfix">
            <div class="main_img">
              <a href="{{selected_item.image_url}}" data-lightbox="main_images" data-title="{{selected_item.name}}" ng-style="{'background-image': 'url('+ selected_item.image_url +')'}"></a>
            </div> 
            
            <ul class="thumb_group">
              <li class="thumb_img" ng-repeat="item_img in selected_item.images" ng-click="selectThumbnailImg($index, $event)">
                <div ng-style="{'background-image': 'url('+ item_img +')'}"></div>
              </li>            
            </ul>             
          </div>

          <div class="card">
            <div class="card_heading">
              <h2>{{selected_item.name}}</h2>
            </div>

            <div class="card_body clearfix">
              <div class="left_area">
                <span class="item_name">place</span>
                <p>{{selected_item.zip_no}}<br>
                {{selected_item.address}}</p>

                <span class="item_name">visit</span>
                <p>{{selected_item.visit_date}}</p>
            
                <span class="item_name">comment</span>
                <p>{{selected_item.caption}}</p>
              </div>
              <!--
              <div>{{selected_item.prefecture}}</div>
              -->
              <div class="right_area">
                <ul>
                  <li class="box"><span class="item_name">season</span>
                  <p>{{selected_item.season}}</p></li>
                  <li class="box"><span class="item_name">migoro</span>
                  <p>{{selected_item.season_monthly}}</p></li>
                  <li class="box"><span class="item_name">accessibility</span>
                  <p>{{selected_item.accessibility}}</p></li>
                  <li class="box"><span class="item_name">crowdness</span>
                  <p>{{selected_item.crowdness}}</p></li>
                </ul>
              </div>
            </div>
          </div><!-- /.card -->
        </div><!-- /#detail -->
      </div><!-- /.row -->

      <!-- ↓ここから検索条件指定↓ -->
      <div class="row">
        <div class="col-md-4">
          <select id="select_list_pref" size="8" multiple ng-model="selected_pref">
            <option ng-repeat="option in pref_list" value="{{option}}">{{option}}</option>
          </select>
        </div>
        <div class="col-md-4">
          <select id="select_list_order" size="3" ng-model="selected_order">
            <option ng-repeat="option in order_list" value="{{option.id}}">{{option.name}}</option>
          </select>
        </div>
        <div class="col-md-4">
          <button class="btn" ng-click="searchPoint()">Search</button>
        </div>
      </div>
      <!-- ↑ここまで検索条件指定↑ -->

      <div id="my_history" class="row">
        <div class="col-md-3 col_space10" ng-repeat="(card_idx, item) in items" >
            <div ng-click="addMarker(card_idx)">add marker</div>
            <div class="panel" ng-click="selectCard(card_idx)">
              <div class="panel-heading">
                <div class="panel_img" ng-style="{'background-image': 'url('+ item.image_url +')'}"></div>
                <div class="ravel">
                  <span class="season">{{item.season}}</span>
                  <span class="prefecture">{{item.prefecture}}</span>
                </div>
              </div>
              <div class="panel-body">
                {{item.name}}
              </div>
            </div>
        </div>
      </div><!-- /#my_history -->

      <div>
        <button ng-click="addAllMarkers()">add all markers</button>
        <button ng-click="deleteAllMarkers()">delete all markers</button>
      </div>

    </div> <!-- /.container -->
  </div> <!-- /#contents -->

<script src="lib/lightbox/js/lightbox.js"></script>
</body>
</html>